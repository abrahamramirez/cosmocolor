#include <18F45K50.h>      
#device adc=10             
#fuses NOCPUDIV, HSH, PRIMARY, NOIESO, NOFCMEN
#use delay(internal=48MHz) 
#use RS232(baud=9600, parity=N, xmit=PIN_C6, rcv=PIN_C7, bits=8)
#include <stdlib.h>        
#include <lcd.c> 

#define TC_CLK  PIN_B2 
#define TC_CS   PIN_B2 
#define TC_DATA PIN_B1 

#include "max6675.c"

int16 adc = 0;
int32 val = 0;
int i = 0;

void main(){  
   lcd_init();       
   setup_adc_ports(sAN0);
   setup_adc(ADC_CLOCK_INTERNAL);               
   set_adc_channel(0); 
  
   while(1) { 
      for(i = 0; i < 30; i++){
         adc = read_adc(ADC_START_AND_READ);
         val += adc;
      }
      val /= 30;
      
      lcd_gotoxy(1,1);                                   
      printf(lcd_putc,"Llenando...     ");
      lcd_gotoxy(1,2);
      printf(lcd_putc, "%Lu   ", val); 
      delay_ms(200);
   } 
}
